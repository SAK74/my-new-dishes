(this["webpackJsonpmy-new-dishes"]=this["webpackJsonpmy-new-dishes"]||[]).push([[0],{168:function(e,t,n){"use strict";n.r(t);var r,a=n(42),c=n.n(a),i=n(45),s=n(3),o=n(14),j=n(244),l=n(245),u=n(248),d=n(236),b=n(229),p=n(249),O=n(225),m=n(234),h=n(28),x=n(86),f=n(246),v=n(235),y=n(247),g=n(17),w=n(69),C=n(207),_=n(237),k=n(212),S=n(232),z=n(82),P=n(117),q=n.n(P),I=Object(z.b)("sendRequest",(function(e,t){var n=t.getState;return q()({url:"https://frosty-wood-6558.getsandbox.com/dishes",method:"POST",headers:{"Content-type":"application/json"},data:n().order}).then((function(e){return e.data})).catch((function(e){var t="";if(e.response){console.log("response: ",e.response);for(var n=0,r=Object.entries(e.response.data);n<r.length;n++){var a=Object(o.a)(r[n],2),c=a[0],i=a[1];t+="".concat(c.toUpperCase(),": ").concat(i)}}else e.request?(console.log("request: ",e.request),t=e.request):t=e;return Promise.reject(t)}))})),N=Object(z.c)({name:"dishes",initialState:{order:{name:"",preparation_time:"00:00:00",type:""},status:"iddle",error:null,sendedOrders:[]},reducers:{addOrder:function(e,t){e.order=t.payload,e.status="iddle"}},extraReducers:(r={},Object(s.a)(r,I.fulfilled,(function(e,t){e.status="complete",e.sendedOrders.push(t.payload)})),Object(s.a)(r,I.pending,(function(e){e.status="pending"})),Object(s.a)(r,I.rejected,(function(e,t){e.status="error",e.error=t.error.message})),r)}),T=N.actions.addOrder,D=Object(z.a)({reducer:N.reducer}),W=n(1);function F(){var e=Object(i.c)((function(e){return e.order})),t=Object(i.b)(),n=Object(g.g)(),r=Object.entries(e).map((function(e,t){return Object(W.jsx)(C.a,{sx:{px:2},primary:e[0]+":",secondary:e[1]},t)}));return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(d.a,{component:_.a,sx:{minWidth:300},children:r}),Object(W.jsxs)(k.a,{direction:"row",sx:{width:"50%",justifyContent:"space-between",my:2},children:[Object(W.jsx)(S.a,{component:w.a,to:"/",children:"back"}),Object(W.jsx)(S.a,{children:"next",onClick:function(){t(I()),n.push("/summary")}})]})]})}var L=n(40),V=n(83),A=n(221),B=n(224),E=n(238),J=n(228),M=n(239),R=n(4),U=n(84),Y=["meta","input"],G=["name","preparation_time","type"],H=["handleSubmit","values","form"],K=Object(R.a)((function(e){return Object(W.jsx)(U.a,Object(L.a)(Object(L.a)({},e),{},{parse:"number"===e.type?function(e){return Number(e)}:void 0,render:function(e){var t=e.meta,n=e.input,r=Object(V.a)(e,Y);return Object(W.jsx)(A.a,Object(L.a)(Object(L.a)({},r),{},{inputProps:Object(L.a)(Object(L.a)({},n),r.inputProps),InputLabelProps:{shrink:!0},required:!0,error:t.invalid&&t.touched,helperText:t.invalid&&t.touched&&t.error}))}}))}))((function(e){var t=e.theme;return Object(s.a)({flex:1},t.breakpoints.up("md"),{width:200})})),Q=Object(R.a)(B.a)((function(e){return{color:["yellow","#ffd100","orange","#fe7900","#ff5b00","#d14b00","#fe0000","#bd0000","#a50000","#6d0000"][e.value-1]}}));function X(){var e=Object(i.c)((function(e){return e.order})),t=e.name,n=e.preparation_time,r=e.type,a=Object(V.a)(e,G),c=Object(i.b)(),s=Object(g.g)(),o=function(e){return e?void 0:"Fill this field"},j=function(e){return isNaN(e)?"Value must be a number":void 0},l=function(e){return[o,j].reduce((function(t,n){return t||n(e)}),void 0)};return Object(W.jsx)(U.b,{onSubmit:function(e){"pizza"===e.type&&(e=Object(L.a)(Object(L.a)({},e),{},{diameter:Number(e.diameter)})),c(T(e)),s.push("/confirm")},initialValues:Object(L.a)({name:t,preparation_time:n,type:r},a),render:function(e){var t,n=e.handleSubmit,r=e.values,a=e.form,c=Object(V.a)(e,H);return Object(W.jsxs)(E.a,{component:"form",onSubmit:n,noValidate:!0,sx:{display:"flex",alignItems:"center",flexDirection:"column",p:3},children:[Object(W.jsxs)(k.a,{direction:"row",sx:{justifyContent:"center"},spacing:2,children:[Object(W.jsx)(K,{name:"name",validate:o,label:"Dish name"}),Object(W.jsx)(K,{name:"preparation_time",validate:function(e){return e.split(":").some(Number)?void 0:"Time can't be zero"},type:"time",inputProps:{step:1},label:"Preparation Time"}),Object(W.jsxs)(K,{name:"type",validate:o,label:"Type of dish",select:!0,onChange:(t=a.initialize,function(e){var n=e.target.value,r="pizza"===n?{no_of_slices:1,diameter:0}:"soup"===n?{spiciness_scale:1}:{slices_of_bread:1};t((function(e){var t=e.name,n=e.preparation_time,a=e.type;return Object(L.a)({name:t,preparation_time:n,type:a},r)}))}),children:[Object(W.jsx)(J.a,{value:"pizza",children:"Pizza"}),Object(W.jsx)(J.a,{value:"soup",children:"Soup"}),Object(W.jsx)(J.a,{value:"sandwich",children:"Sandwich"})]})]}),Object(W.jsxs)(M.a,{sx:{m:3},in:!!r.type,orientation:"horizontal",children:["pizza"===r.type&&Object(W.jsxs)(E.a,{sx:{"&>*":{mx:2,mb:1}},children:[Object(W.jsx)(K,{name:"no_of_slices",validate:o,type:"number",label:"Number of slices",inputProps:{min:"1"}}),Object(W.jsx)(K,{name:"diameter",validate:l,label:"Diameter",InputProps:{endAdornment:"cm"}})]}),"soup"===r.type&&Object(W.jsxs)(E.a,{sx:{position:"relative",mt:3},children:[Object(W.jsx)(x.a,{children:"Spiciness scale",variant:"body2",sx:{position:"absolute",top:26}}),Object(W.jsx)(U.a,{name:"spiciness_scale",render:function(e){var t=e.input;return Object(W.jsx)(Q,{sx:{minWidth:"220px"},valueLabelDisplay:"on",min:1,max:10,value:t.value,onChange:t.onChange})}})]}),"sandwich"===r.type&&Object(W.jsx)(K,{name:"slices_of_bread",type:"number",validate:o,inputProps:{min:"1"},label:"Number of slices of bread"})]}),Object(W.jsxs)(k.a,{direction:"row",sx:{justifyContent:"center"},spacing:6,children:[Object(W.jsx)(S.a,{children:"reset all",variant:"outlined",disabled:c.pristine,onClick:function(){return a.reset({name:"",preparation_time:"00:00:00",type:""})}}),Object(W.jsx)(S.a,{type:"submit",children:"Ok",variant:"outlined",disabled:c.hasValidationErrors})]})]})}})}var Z=n(226),$=n(240),ee=n(241),te=n(242),ne=n(233),re=n(227),ae=n(243),ce=n(223),ie=n(217),se=n(0),oe=n(121),je=n.n(oe);function le(){var e,t,n,r=Object(i.c)((function(e){return e})),a=r.status,c=r.sendedOrders,s=r.error,j=Object(se.useState)(!1),l=Object(o.a)(j,2),u=l[0],b=l[1],p=Object(se.useState)(!1),O=Object(o.a)(p,2),m=O[0],h=O[1],x=null;return"complete"===a&&(n=c[c.length-1],e=Object.entries(n).map((function(e,t){return Object(W.jsx)(C.a,{primary:e[0]+":",secondary:e[1]},t)})),x=c.map((function(e,t){return Object(W.jsx)(d.a,{component:_.a,children:Object.entries(e).map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(W.jsx)(Z.a,{children:Object(W.jsx)(C.a,{sx:{m:0},primary:"".concat(n,": "),secondary:r})},n)}))},t)}))),"pending"!==a&&(t="error"===a?Object(W.jsxs)("div",{children:[Object(W.jsx)($.a,{children:Object(W.jsx)(ee.a,{title:"Upss... request is failed",subheader:s,subheaderTypographyProps:{color:"error.main"}})}),Object(W.jsx)(S.a,{component:w.a,to:"/confirm",children:"please try again "})]}):Object(W.jsxs)("div",{children:[Object(W.jsxs)($.a,{children:[Object(W.jsx)(ee.a,{title:"You enquiry is sended",subheader:"number of order: ".concat(n.id)}),Object(W.jsxs)(te.a,{children:[Object(W.jsx)(E.a,{sx:{flex:1}}),Object(W.jsx)(S.a,{children:"more info",color:"inherit",size:"small",endIcon:Object(W.jsx)(je.a,{}),onClick:function(e){return b(e.target)}}),Object(W.jsx)(ne.a,{open:Boolean(u),anchorEl:u,onClose:function(){return b(!1)},elevation:1,children:Object(W.jsx)(_.a,{sx:{py:2,px:4},children:e})})]})]}),Object(W.jsxs)(k.a,{direction:"row",spacing:7,children:[Object(W.jsx)(S.a,{component:w.a,to:"/",children:"create new order"}),Object(W.jsx)(S.a,{children:"check history",size:"small",color:"success",onClick:function(){return h(!0)}})]})]})),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(re.a,{open:"pending"===a,children:Object(W.jsx)(ae.a,{})}),t,Object(W.jsx)(ce.a,{open:m,onClose:function(){return h(!1)},children:Object(W.jsx)(ie.a,{children:Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(d.a,{children:x,sx:{p:2,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex","&>*":{m:"5px !important"},maxWidth:"90%",overflow:"auto"}}),Object(W.jsx)(S.a,{variant:"contained",color:"error",onClick:function(){return h(!1)},children:"close"})]})})})]})}var ue=n(122),de=n(231),be=n(218),pe=n(219),Oe=n(220),me=Object(R.a)("div")((function(e){return e.theme.mixins.toolbar})),he=["Create order","Confirm choice","Send request"];function xe(){var e=Object(se.useState)(0),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(se.useState)(!1),c=Object(o.a)(a,2),i=c[0],w=c[1],C=Object(se.useState)(!1),_=Object(o.a)(C,2),k=_[0],S=_[1],z=Object(se.useMemo)((function(){return Object(ue.a)({palette:{mode:k?"dark":"light"}})}),[k]),P=Object(R.a)(m.a)((function(e){e.theme;return Object(s.a)({width:55},"& .".concat(h.a.switchBase),{width:39,height:38})}));return Object(W.jsxs)(de.a,{theme:z,children:[Object(W.jsx)(j.a,{children:Object(W.jsxs)(l.a,{children:[Object(W.jsx)(x.a,{variant:"h4",children:"My dishes App",sx:{flex:1}}),Object(W.jsx)(f.a,{children:Object(W.jsx)(be.a,{}),onClick:function(){return w(!0)}})]})}),Object(W.jsx)(me,{}),Object(W.jsx)(v.a,{anchor:"right",open:i,onClose:function(){return w(!1)},closeAfterTransition:!0,PaperProps:{sx:{minWidth:200}},children:Object(W.jsx)(y.a,{label:k?"Lighten":"Darken",labelPlacement:"top",checked:k,sx:{mt:2,ml:1},control:Object(W.jsx)(P,{icon:Object(W.jsx)(pe.a,{color:"primary"}),checkedIcon:Object(W.jsx)(Oe.a,{}),onChange:function(){return S((function(e){return!e}))},color:"primary"})})}),Object(W.jsx)(u.a,{maxWidth:"md",component:d.a,sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:Object(W.jsxs)(g.a,{children:[Object(W.jsxs)(g.d,{children:[Object(W.jsx)(g.b,{exact:!0,path:"/",render:function(){return Object(W.jsx)(X,{})}}),Object(W.jsx)(g.b,{path:"/confirm",render:function(){return Object(W.jsx)(F,{})}}),Object(W.jsx)(g.b,{path:"/summary",render:function(){return Object(W.jsx)(le,{})}})]}),Object(W.jsx)(g.b,{render:function(e){var t=e.location;return r((function(){switch(t.pathname){case"/confirm":return 1;case"/summary":return 2;default:return 0}})),Object(W.jsx)(b.a,{activeStep:n,alternativeLabel:!0,sx:{width:"90%",my:5},children:he.map((function(e,t){return Object(W.jsx)(p.a,{children:Object(W.jsx)(O.a,{children:e})},t)}))})}})]})})]})}c.a.render(Object(W.jsx)(i.a,{store:D,children:Object(W.jsx)(xe,{})}),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.91ace063.chunk.js.map